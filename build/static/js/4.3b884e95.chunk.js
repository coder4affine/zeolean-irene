(window.webpackJsonp=window.webpackJsonp||[]).push([[4,7],{144:function(e,t,n){"use strict";n.r(t);var a=n(80),r=n.n(a),l=n(81),o=n(0),c=n.n(o),i=n(143),u=n(102),s=n(79),p=function(e){var t=e.field,n=e.form,a=n.touched,r=n.errors,l=e.title,o=Object(s.a)(e,["field","form","title"]);return c.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",margin:10}},c.a.createElement("label",{htmlFor:"title"},l),c.a.createElement("input",Object.assign({type:"text"},t,o)),r.name&&a.name&&c.a.createElement("div",null,r.name))},m=function(e){var t=e.field,n=e.form,a=n.touched,r=n.errors,l=e.data,o=e.title,i=Object(s.a)(e,["field","form","data","title"]);return c.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",margin:10}},c.a.createElement("label",{htmlFor:"title"},o),c.a.createElement("select",Object.assign({},t,i),c.a.createElement("option",{value:""},"Select Author"),l&&l.map(function(e){return c.a.createElement("option",{key:e.id,value:e.id},"".concat(e.firstName," ").concat(e.lastName))})),r.name&&a.name&&c.a.createElement("div",null,r.name))},d=[{id:1,name:"title",title:"Title",component:"text"},{id:2,name:"watchHref",title:"Link",component:"text"},{id:3,name:"category",title:"Category",component:"text"},{id:4,name:"length",title:"Length",component:"text"},{id:5,name:"authorId",title:"Author",component:"select"}],h=Object(u.object)().shape({title:Object(u.string)().min(5,"Too Short!").max(50,"Too Long!").required("Required"),watchHref:Object(u.string)().min(2,"Too Short!").max(200,"Too Long!").required("Required")});t.default=function(e){var t=e.authors,n=e.course,a=e.addCourse,o=e.closeDialog;return c.a.createElement("div",null,c.a.createElement("h2",null,"Add Courses"),c.a.createElement(i.b,{enableReinitialize:!0,initialValues:n,validationSchema:h,onSubmit:function(){var e=Object(l.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(t,n).then(o);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),render:function(e){var a=e.handleSubmit,r=e.isSubmitting,l=e.errors;return console.log(l),c.a.createElement("form",{onSubmit:a,style:{display:"flex",flexDirection:"column"}},c.a.createElement("span",null,l.apiFail),d.map(function(e){return c.a.createElement(i.a,{key:e.id,name:e.name,title:e.title,data:"select"===e.component?t:null,component:"text"===e.component?p:m})}),c.a.createElement("input",{type:"submit",value:n.id?"Edit Course":"Save Course",disabled:r}))}}))}},280:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n(13),l=n(15),o=n(14),c=n(16),i=n(0),u=n.n(i),s=n(25),p=n(80),m=n.n(p),d=n(81),h=n(6),f=function(){return function(){var e=Object(d.a)(m.a.mark(function e(t){var n,a,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:h.d}),t({type:h.a}),e.prev=2,e.next=5,fetch("http://localhost:3004/courses");case 5:return n=e.sent,e.next=8,fetch("http://localhost:3004/authors");case 8:return a=e.sent,e.next=11,Promise.all([n,a]);case 11:return r=e.sent,e.next=14,r[0].json();case 14:return l=e.sent,e.next=17,r[1].json();case 17:o=e.sent,t({type:h.f,payload:l}),t({type:h.c,payload:o}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),t({type:h.e,payload:e.t0}),t({type:h.b,payload:e.t0});case 26:case"end":return e.stop()}},e,null,[[2,22]])}));return function(t){return e.apply(this,arguments)}}()},y=function(e,t){return function(){var n=Object(d.a)(m.a.mark(function n(a){var r,l,o;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.id?a({type:h.j}):a({type:h.g}),console.log(e),n.prev=2,r="http://localhost:3004/courses",e.id&&(r="".concat(r,"/").concat(e.id)),n.next=7,fetch(r,{headers:{accept:"application/json","Content-Type":"application/json"},method:e.id?"PUT":"POST",body:JSON.stringify(e)});case 7:return l=n.sent,t.setSubmitting(!1),t.resetForm(),n.next=12,l.json();case 12:o=n.sent,console.log(o),o.error?e.id?a({type:h.k,payload:o}):a({type:h.h,payload:o}):e.id?a({type:h.l,payload:o}):a({type:h.i,payload:o}),n.next=23;break;case 17:n.prev=17,n.t0=n.catch(2),console.log(n.t0),t.setErrors(n.t0),t.setSubmitting(!1),e.id?a({type:h.k,payload:n.t0}):a({type:h.h,payload:n.t0});case 23:case"end":return n.stop()}},n,null,[[2,17]])}));return function(e){return n.apply(this,arguments)}}()},E=n(144),b=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).state={open:!1,course:{title:"",watchHref:"",authorId:"",length:"",category:""}},n.addCourses=function(){n.setState({open:!0})},n.editCourse=function(e){n.setState({course:e,open:!0})},e.getData(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,n=this.props,a=n.courses,r=a.courses,l=a.error,o=n.authors.authors,c=n.addCourse,i=this.state,s=i.course,p=i.open;return console.log(l),u.a.createElement("div",null,l&&u.a.createElement("span",null,l.error),u.a.createElement("input",{type:"button",value:"Create Course",onClick:this.addCourses}),u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Title"),u.a.createElement("th",null,"Link"),u.a.createElement("th",null,"Author"),u.a.createElement("th",null,"Length"),u.a.createElement("th",null,"Category"),u.a.createElement("th",null,"Actions"))),u.a.createElement("tbody",null,r.map(function(n){return u.a.createElement("tr",{key:n.id},u.a.createElement("td",{className:t%2===0?"spanStyle":"spanStyle title"},n.title),u.a.createElement("td",null,u.a.createElement("a",{href:n.watchHref},"Link")),u.a.createElement("td",null,n.authorId),u.a.createElement("td",null,n.length),u.a.createElement("td",null,n.category),u.a.createElement("td",null,u.a.createElement("input",{type:"button",value:"Edit",onClick:function(){return e.editCourse(n)}})))}))),u.a.createElement("dialog",{open:p},u.a.createElement("div",null,u.a.createElement("input",{type:"button",onClick:function(){return e.setState({open:!1})},value:"Close"}),u.a.createElement(E.default,{authors:o,course:s,addCourse:c,closeDialog:function(){return e.setState({open:!1})}}))))}}]),t}(i.Component);t.default=Object(s.b)(function(e){return{locale:e.locale,authors:e.authors,courses:e.courses}},function(e){return{changeLocale:function(){return e({type:"CHANGE_LOCALE",payload:{locale:"spanish"}})},getData:function(){return f()(e)},addCourse:function(t,n){return y(t,n)(e)}}})(b)}}]);
//# sourceMappingURL=4.3b884e95.chunk.js.map